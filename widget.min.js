var form=document.querySelector("#nhs_Form"),stateSelect=document.querySelector("#state"),input=document.querySelector("#searchtext");form.addEventListener("submit",function(a){var b=document.querySelector("#formError");""===input.value&&(b.style.display="block",a.preventDefault())});input.addEventListener("input",function(a){a=document.querySelector("#formError");"block"===a.style.display&&(a.style.display="none")});
if(DEFAULT_STATE){var firstOption=stateSelect.querySelector("option");firstOption.value=DEFAULT_STATE}if(REFER){var referInput=document.createElement("input");referInput.setAttribute("type","hidden");referInput.setAttribute("name","refer");referInput.id="refer";referInput.value=REFER;form.appendChild(referInput)}NEW_WINDOW&&(form.target="_blank");
if(PARTNER_ID){var xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var a=getInfoFromResponse(JSON.parse(xhr.response));changeSiteUrl(a);addStates(a.states)}};xhr.open("GET","https://mvc.newhomesource.com/getpartnerinfo?id=9101",!0);xhr.send()}function changeSiteUrl(a){form.action=form.action.replace("newhomesource.com","newhomesource.com/"+a.siteUrl)}
function addStates(a){for(var b=0;b<a.length;b++){var c=a[b],d=document.createElement("option");d.value=c.abbr;d.innerText=c.name;stateSelect.appendChild(d)}}function getInfoFromResponse(a){var b=getStates(a.States),c="";1!==PARTNER_ID&&600!==PARTNER_ID&&(c=a.PartnerDetails.SiteUrl);return{states:b,siteUrl:c}}function getStates(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];b.push({name:d.StateName,abbr:d.StateAbbr})}return b};